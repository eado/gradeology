(this.webpackJsonpgradeology=this.webpackJsonpgradeology||[]).push([[8],{61:function(e,n,t){e.exports=t(88)},67:function(e,n,t){var r={"./ion-action-sheet-controller_8.entry.js":[94,43],"./ion-action-sheet-ios.entry.js":[95,44],"./ion-action-sheet-md.entry.js":[96,45],"./ion-alert-ios.entry.js":[97,24],"./ion-alert-md.entry.js":[98,25],"./ion-app_8-ios.entry.js":[99,11],"./ion-app_8-md.entry.js":[100,12],"./ion-avatar_3-ios.entry.js":[101,46],"./ion-avatar_3-md.entry.js":[102,47],"./ion-back-button-ios.entry.js":[103,48],"./ion-back-button-md.entry.js":[104,49],"./ion-backdrop-ios.entry.js":[105,81],"./ion-backdrop-md.entry.js":[106,82],"./ion-button_2-ios.entry.js":[107,50],"./ion-button_2-md.entry.js":[108,51],"./ion-card_5-ios.entry.js":[109,52],"./ion-card_5-md.entry.js":[110,53],"./ion-checkbox-ios.entry.js":[111,54],"./ion-checkbox-md.entry.js":[112,55],"./ion-chip-ios.entry.js":[113,56],"./ion-chip-md.entry.js":[114,57],"./ion-col_3.entry.js":[115,83],"./ion-datetime_3-ios.entry.js":[116,20],"./ion-datetime_3-md.entry.js":[117,21],"./ion-fab_3-ios.entry.js":[118,58],"./ion-fab_3-md.entry.js":[119,59],"./ion-img.entry.js":[120,84],"./ion-infinite-scroll_2-ios.entry.js":[121,39],"./ion-infinite-scroll_2-md.entry.js":[122,40],"./ion-input-ios.entry.js":[123,60],"./ion-input-md.entry.js":[124,61],"./ion-item-option_3-ios.entry.js":[125,62],"./ion-item-option_3-md.entry.js":[126,63],"./ion-item_8-ios.entry.js":[127,64],"./ion-item_8-md.entry.js":[128,65],"./ion-loading-ios.entry.js":[129,26],"./ion-loading-md.entry.js":[130,27],"./ion-menu_4-ios.entry.js":[131,18],"./ion-menu_4-md.entry.js":[132,19],"./ion-modal-ios.entry.js":[133,14],"./ion-modal-md.entry.js":[134,15],"./ion-nav_5.entry.js":[135,13],"./ion-popover-ios.entry.js":[136,16],"./ion-popover-md.entry.js":[137,17],"./ion-progress-bar-ios.entry.js":[138,66],"./ion-progress-bar-md.entry.js":[139,67],"./ion-radio_2-ios.entry.js":[140,32],"./ion-radio_2-md.entry.js":[141,33],"./ion-range-ios.entry.js":[142,68],"./ion-range-md.entry.js":[143,69],"./ion-refresher_2-ios.entry.js":[144,41],"./ion-refresher_2-md.entry.js":[145,42],"./ion-reorder_2-ios.entry.js":[146,37],"./ion-reorder_2-md.entry.js":[147,38],"./ion-ripple-effect.entry.js":[148,85],"./ion-route_4.entry.js":[149,70],"./ion-searchbar-ios.entry.js":[150,28],"./ion-searchbar-md.entry.js":[151,29],"./ion-segment_2-ios.entry.js":[152,71],"./ion-segment_2-md.entry.js":[153,72],"./ion-select_3-ios.entry.js":[154,34],"./ion-select_3-md.entry.js":[155,35],"./ion-slide_2-ios.entry.js":[156,86],"./ion-slide_2-md.entry.js":[157,87],"./ion-spinner.entry.js":[158,73],"./ion-split-pane-ios.entry.js":[159,88],"./ion-split-pane-md.entry.js":[160,89],"./ion-tab-bar_2-ios.entry.js":[161,74],"./ion-tab-bar_2-md.entry.js":[162,75],"./ion-tab_2.entry.js":[163,36],"./ion-text.entry.js":[164,76],"./ion-textarea-ios.entry.js":[165,77],"./ion-textarea-md.entry.js":[166,78],"./ion-toast-ios.entry.js":[167,30],"./ion-toast-md.entry.js":[168,31],"./ion-toggle-ios.entry.js":[169,22],"./ion-toggle-md.entry.js":[170,23],"./ion-virtual-scroll.entry.js":[171,90]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=67,e.exports=a},68:function(e,n,t){var r={"./ion-icon.entry.js":[175,98]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=68,e.exports=a},87:function(e,n,t){},88:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(24),i=t.n(o),l=t(12),s=t(1),c=t(54),u=t(16),d=t(57),m=t(59),y=t(58),f=t(30),g=t.n(f),h=function(e,n){return Number(Math.round(Number(String(e)+"e"+String(n)))+"e-"+n)},v=function(e){var n=Object(r.useState)([]),t=Object(u.a)(n,2),o=t[0],i=t[1];Object(r.useEffect)((function(){k.length<1?S().then((function(){O(e.match.params.id).then((function(e){i(e)}))})):O(e.match.params.id).then((function(e){i(e)}))}),[e.match.params.id]);var l=function(e){var n="",t=0,r="";return e.grade?(t=h(100*e.grade/Number(e.max_points),2),r=w(t),n+=e.grade):n+="*",[r,n+="/"+e.max_points+" ("+t+"%)"]};return a.a.createElement(s.p,null,a.a.createElement(s.h,null,a.a.createElement(s.u,null,a.a.createElement(s.t,null,e.match.params.name),a.a.createElement(s.f,{slot:"start"},a.a.createElement(s.d,null))),o.length<1?a.a.createElement(s.q,{type:"indeterminate"}):null),a.a.createElement(s.g,{className:"ion-padding"},o.map((function(e,n){return 0!==e.weight||e.assignments.length>0?a.a.createElement(s.n,{key:n},a.a.createElement(s.k,{lines:e.assignments.length>0?"full":"none"},a.a.createElement("b",null,e.title," (",e.weight,"%)")," ",e.grade?a.a.createElement(s.o,{slot:"end"},a.a.createElement("b",null,w(e.grade)," ",e.points,"/",e.totalPoints," (",e.grade,"%) ")):null),e.assignments.map((function(e,n){return a.a.createElement(s.k,{lines:"none",key:n},function(e){return g()(e.due).diff(g()(Date.now()))<0&&!e.grade}(e)?a.a.createElement(a.a.Fragment,null,a.a.createElement("i",null,e.title),a.a.createElement(s.o,{slot:"end"},a.a.createElement("i",null,a.a.createElement("b",null,l(e)[0])," ",l(e)[1]))):a.a.createElement(a.a.Fragment,null,e.title,a.a.createElement(s.o,{slot:"end"},a.a.createElement("b",null,l(e)[0])," ",l(e)[1])))}))):null}))))},j="",p="",_="";var b=function(){j=window.localStorage.getItem("key")?window.localStorage.getItem("key"):"",p=window.localStorage.getItem("secret")?window.localStorage.getItem("secret"):"",_=window.localStorage.getItem("uid")?window.localStorage.getItem("uid"):""};b();function E(e,n){return new Promise((function(t,r){(function(e){var n={Authorization:'OAuth oauth_consumer_key="'.concat(j,'",oauth_signature_method="PLAINTEXT",oauth_timestamp="').concat(Date.now()/1e3,'",oauth_nonce="').concat(Object(y.v4)(),'",oauth_version="1.0",oauth_signature="').concat(p,'%26"')};return fetch("https://cors-anywhere.herokuapp.com/api.schoology.com/v1/"+e,{method:"GET",headers:n})})(e).then((function(e){200!==e.status&&r("Status not 200"),e.json().then((function(e){e?(n(e,t,r),window.localStorage.setItem("verified","true")):r("Invalid Credentials")})).catch((function(e){console.log(e),r(e)}))})).catch((function(e){console.log(e),r(e)}))}))}var w=function(e){return e>92.44?"A":e>89.44?"A-":e>86.44?"B+":e>82.44?"B":e>79.44?"B-":e>76.44?"C+":e>72.44?"C":e>69.44?"C-":e>66.44?"D+":e>62.44?"D":e>59.44?"D-":isNaN(e)?"?":"F"},k=[],S=function(){return new Promise((function(e,n){E("users/"+_+"/sections",(function(e,n,t){n(e.section.map((function(e){return{id:e.id,name:e.course_title,gp:e.grading_periods,image:(n=e.profile_url,"https:"+n.split(":")[1])};var n})))})).then((function(n){var t=["final"],r=!0,a=!1,o=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value,c=!0,u=!1,d=void 0;try{for(var m,y=s.gp[Symbol.iterator]();!(c=(m=y.next()).done);c=!0){var f=m.value;0===f||f in t||t.push(f)}}catch(g){u=!0,d=g}finally{try{c||null==y.return||y.return()}finally{if(u)throw d}}}}catch(g){a=!0,o=g}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}E("users/"+_+"/grades?grading_period_ids="+t,(function(t,r,a){k=t.section;var o=0,i=!0,l=!1,s=void 0;try{for(var c,u=k[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value,m=Math.abs(d.section_id-n[0].id),y=0,f=0,h=!0,v=!1,j=void 0;try{for(var p,_=n[Symbol.iterator]();!(h=(p=_.next()).done);h=!0){var b=p.value,E=Math.abs(d.section_id-b.id);E<m&&(m=E,y=f),f++}}catch(g){v=!0,j=g}finally{try{h||null==_.return||_.return()}finally{if(v)throw j}}k[o].section_id=n[y].id,k[o].name=n[y].name,k[o].image=n[y].image,o++}}catch(g){l=!0,s=g}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}e(),r()}))})).catch((function(e){return n(e)}))}))},x=function(e){var n="",t=!0,r=!1,a=void 0;try{for(var o,i=e.split(" ")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value,s="";if(l.length>3){var c=0,u=!0,d=!1,m=void 0;try{for(var y,f=l.split("")[Symbol.iterator]();!(u=(y=f.next()).done);u=!0){var g=y.value;s+=0===c?g.toUpperCase():g.toLowerCase(),c++}}catch(h){d=!0,m=h}finally{try{u||null==f.return||f.return()}finally{if(d)throw m}}}else s=l;n+=s+" "}}catch(h){r=!0,a=h}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return n},O=function(e){return E("/sections/"+e+"/assignments?start=0&limit=10000",(function(n,t,r){var a=[],o={},i=!0,l=!1,s=void 0;try{for(var c,u=k[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var y=c.value;if(y.section_id===e){var f=(o=y).final_grade[0].grade,g=null,v=null,j=o.final_grade.find((function(e){return"final"===e.period_id}));j&&(f=j.grade,(g=o.final_grade.find((function(e){return"final"!==e.period_id&&!e.grading_category})))&&g.grade&&(v=o.final_grade.find((function(e){return"final"!==e.period_id&&e.grading_category})))),a=(a=[{title:"Final",weight:100,grade:f,points:f,totalPoints:100,assignments:[],id:1/0},g&&v?{title:"Exam",weight:10,grade:h(g.grade/(g.grade/(10*(f-.9*v.grade))),2),points:g.grade,totalPoints:h(g.grade/(10*(f-.9*v.grade))*100,2),assignments:[],id:1/0}:null,v?{title:"Class",weight:90,grade:v.grade,points:v.grade,totalPoints:100,assignments:[],id:1/0}:null].concat(Object(m.a)(o.grading_category))).filter((function(e){return e||null}));var p=!0,_=!1,b=void 0;try{for(var E,w=o.final_grade.find((function(e){return e.grading_category})).grading_category[Symbol.iterator]();!(p=(E=w.next()).done);p=!0){var S=E.value,x=0,O=!0,I=!1,N=void 0;try{for(var C,D=a[Symbol.iterator]();!(O=(C=D.next()).done);O=!0){var P=C.value;a[x].assignments=[],P.id===S.category_id&&(a[x].grade=S.grade,a[x].assignments=[]),x++}}catch(ye){I=!0,N=ye}finally{try{O||null==D.return||D.return()}finally{if(I)throw N}}}}catch(ye){_=!0,b=ye}finally{try{p||null==w.return||w.return()}finally{if(_)throw b}}break}}}catch(ye){l=!0,s=ye}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}var G=!0,F=!1,L=void 0;try{for(var M,T=n.assignment[Symbol.iterator]();!(G=(M=T.next()).done);G=!0){var U=M.value,A=!0,B=!1,W=void 0;try{for(var q,J=o.period[0].assignment[Symbol.iterator]();!(A=(q=J.next()).done);A=!0){var z=q.value;if(z.assignment_id===U.id){var K=Object(d.a)({},z,{},U),X=0,$=!0,H=!1,Q=void 0;try{for(var R,V=a[Symbol.iterator]();!($=(R=V.next()).done);$=!0){R.value.id===Number(K.grading_category)&&a[X].assignments.push(K),X++}}catch(ye){H=!0,Q=ye}finally{try{$||null==V.return||V.return()}finally{if(H)throw Q}}}}}catch(ye){B=!0,W=ye}finally{try{A||null==J.return||J.return()}finally{if(B)throw W}}}}catch(ye){F=!0,L=ye}finally{try{G||null==T.return||T.return()}finally{if(F)throw L}}var Y=0,Z=!0,ee=!1,ne=void 0;try{for(var te,re=a[Symbol.iterator]();!(Z=(te=re.next()).done);Z=!0){var ae=te.value;if(!ae.totalPoints){var oe=0,ie=0,le=!0,se=!1,ce=void 0;try{for(var ue,de=ae.assignments[Symbol.iterator]();!(le=(ue=de.next()).done);le=!0){var me=ue.value;me.grade&&(oe+=Number(me.max_points),ie+=Number(me.grade))}}catch(ye){se=!0,ce=ye}finally{try{le||null==de.return||de.return()}finally{if(se)throw ce}}console.log(ae.id),console.log(oe),console.log(ie),a[Y].totalPoints=h(oe,2),a[Y].points=h(ie,2)}Y++}}catch(ye){ee=!0,ne=ye}finally{try{Z||null==re.return||re.return()}finally{if(ee)throw ne}}t(a)}))},I=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1];return Object(r.useEffect)((function(){t.length<1&&S().then((function(){o(function(){var e=[],n=!0,t=!1,r=void 0;try{for(var a,o=k[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var i=a.value;console.log(i.final_grade);var l=i.final_grade[0].grade,s=null,c=null,u=i.final_grade.find((function(e){return"final"===e.period_id}));u&&(l=u.grade,(s=i.final_grade.find((function(e){return"final"!==e.period_id&&!e.grading_category})))&&s.grade&&(c=i.final_grade.find((function(e){return"final"!==e.period_id&&e.grading_category})))),l&&i.name&&e.push({grade:l,examGrade:s&&c?h(s.grade/(s.grade/(10*(l-.9*c.grade))),2):null,classGrade:c?c.grade:null,name:x(i.name),id:i.section_id,image:i.image})}}catch(d){t=!0,r=d}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e}())}))})),a.a.createElement(s.p,null,a.a.createElement(s.h,null,a.a.createElement(s.u,null,a.a.createElement(s.t,null,"Classes")),t.length<1?a.a.createElement(s.q,{type:"indeterminate"}):null),a.a.createElement(s.g,{className:"ion-padding"},a.a.createElement(s.n,null,t.map((function(e,n){return a.a.createElement(s.k,{lines:"none",key:n,routerLink:"/home/section/"+e.name+"/"+e.id},a.a.createElement(s.s,{slot:"start"},a.a.createElement(s.i,{src:e.image})),a.a.createElement(s.l,null,e.name),a.a.createElement(s.o,{slot:"end"},e.classGrade?a.a.createElement(a.a.Fragment,null,a.a.createElement("b",null,w(e.classGrade),"\xa0"),"(",e.classGrade,"%)\u2002"):null,e.examGrade?a.a.createElement(a.a.Fragment,null,a.a.createElement("b",null,w(e.examGrade),"\xa0"),"(",e.examGrade,"%)\u2002"):null,a.a.createElement("b",null,w(e.grade),"\xa0"),"(",e.grade,"%)"))})))))},N=function(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],o=n[1],i=Object(r.useState)(""),c=Object(u.a)(i,2),d=c[0],m=c[1],y=Object(r.useState)(""),f=Object(u.a)(y,2),g=f[0],h=f[1],v=Object(r.useState)(!1),j=Object(u.a)(v,2),p=j[0],w=j[1],k=Object(r.useState)(!1),S=Object(u.a)(k,2),x=S[0],O=S[1],I=function(){console.log([t,d,g]),window.localStorage.setItem("key",t),window.localStorage.setItem("secret",d),window.localStorage.setItem("uid",g),b(),E("users/"+_,(function(e,n,t){e?n():t("Invalid Credentials")})).then((function(){return w(!0)})).catch()};return a.a.createElement(s.p,null,p?a.a.createElement(l.a,{to:"/home"}):null,a.a.createElement(s.b,{isOpen:x,header:"Error",message:"Those credentials didn't work. Please try again.",buttons:["Okay"],onDidDismiss:function(){return O(!1)}}),a.a.createElement(s.h,null,a.a.createElement(s.u,null,a.a.createElement(s.t,null,"Welcome to Gradeology!"))),a.a.createElement(s.g,{className:"ion-padding"},a.a.createElement(s.n,null,a.a.createElement(s.k,null,a.a.createElement(s.l,{position:"stacked"},"Key"),a.a.createElement(s.j,{onIonChange:function(e){return o(e.target.value)}})),a.a.createElement(s.k,null,a.a.createElement(s.l,{position:"stacked"},"Secret"),a.a.createElement(s.j,{onIonChange:function(e){return m(e.target.value)}})),a.a.createElement(s.k,null,a.a.createElement(s.l,{position:"stacked"},"User ID"),a.a.createElement(s.j,{onIonChange:function(e){return h(e.target.value)}})),a.a.createElement("br",null),a.a.createElement(s.e,{onClick:function(){return I()},expand:"full"},"Sign In"))))},C=(t(77),t(78),t(79),t(80),t(81),t(82),t(83),t(84),t(85),t(86),t(87),window.matchMedia("(prefers-color-scheme: dark)"));function D(e){document.body.classList.toggle("dark",e)}D(C.matches),C.addListener((function(e){return D(e.matches)})),Object(s.x)({mode:"ios"});var P=function(){return a.a.createElement(s.c,null,a.a.createElement(c.a,null,a.a.createElement(s.r,null,a.a.createElement(l.b,{path:"/home/section/:name/:id/",component:v,exact:!0}),a.a.createElement(l.b,{path:"/creds",component:N,exact:!0}),a.a.createElement(l.b,{path:"/home",component:I,exact:!0}),a.a.createElement(l.b,{exact:!0,path:"/",render:function(){return a.a.createElement(l.a,{to:window.localStorage.getItem("verified")?"/home":"/creds"})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[61,9,10]]]);
//# sourceMappingURL=main.699e6dd7.chunk.js.map